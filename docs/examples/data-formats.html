<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Ravi Kalia">

<title>File Formats for Data Storage – AWS Machine Learning Associate Certification</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-d801ec56ef41a5df713aa3b4cba1a403.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">AWS Machine Learning Associate Certification</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../aws-mla-exam-resources.html"> 
<span class="menu-text">Exam Resources</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../aws-definitions.html"> 
<span class="menu-text">AWS Services Definitions</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../aws-comparison-tables.html"> 
<span class="menu-text">AWS Comparisons Table</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-examples" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Examples</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-examples">    
        <li>
    <a class="dropdown-item" href="../examples/flink-vs-kinesis.html">
 <span class="dropdown-text">Apache Flink vs Kinesis Data Analytics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../examples/storage.html">
 <span class="dropdown-text">Storage: S3 vs EFS vs FSx vs EBS</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../examples/datastreams.html">
 <span class="dropdown-text">Streaming: Kinesis Data Streams vs Data Firehose vs Managed Service Kafka vs AMAA</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../examples/glue.html">
 <span class="dropdown-text">Glue Data Catalog vs Glue DataBrew vs Glue Studio</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../examples/search.html">
 <span class="dropdown-text">Kendra vs OpenSearch</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../examples/emr-vs-hadoop-vs-spark.html">
 <span class="dropdown-text">EMR vs Hadoop vs Spark</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../examples/data-architecture.html">
 <span class="dropdown-text">Architecting Data: Warehouse, Lakes and Lakehouses</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../examples/glue-athena.html">
 <span class="dropdown-text">Glue and Athena</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../examples/search.html">
 <span class="dropdown-text">AWS Search</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-sagemaker" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Sagemaker</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-sagemaker">    
        <li>
    <a class="dropdown-item" href="../sagemaker/sagemaker-pipelines.html">
 <span class="dropdown-text">SageMaker Pipelines</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sagemaker/sagemaker-model-building-and-deployment.html">
 <span class="dropdown-text">SageMaker for Model Building and Deployment</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sagemaker/sagemaker-validating-labelling-mitigating-bias.html">
 <span class="dropdown-text">SageMaker: Validating, Labelling and Mitigating Bias</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sagemaker/sagemaker-choosing-and-integrating-ml-models.html">
 <span class="dropdown-text">Choosing and Integrating ML Models with AWS SageMaker</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sagemaker/sagemaker-model-deployment-and-monitoring.html">
 <span class="dropdown-text">Advanced Machine Learning with AWS SageMaker</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sagemaker/sagemaker-multi-model-multi-container-deployments.html">
 <span class="dropdown-text">Multi-Model and Multi-Container Deployments on AWS</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sagemaker/sagemaker-deploying-and-monitoring-models-in-vpc.html">
 <span class="dropdown-text">Deploying and Monitoring SageMaker Models in a VPC</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sagemaker/sagemaker-optimizing-deployments.html">
 <span class="dropdown-text">Optimizing SageMaker Deployments: Rightsizing, Cost Optimization, and Security</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sagemaker/sagemaker-vs-bedrock.html">
 <span class="dropdown-text">AI/ML: SageMaker vs Bedrock</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-practice-questions" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Practice Questions</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-practice-questions">    
        <li>
    <a class="dropdown-item" href="../practice/practice-questions-1.html">
 <span class="dropdown-text">Practice Questions 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../practice/practice-questions-2.html">
 <span class="dropdown-text">Practice Questions 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../practice/practice-questions-3.html">
 <span class="dropdown-text">Practice Questions 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../practice/practice-questions-4.html">
 <span class="dropdown-text">Practice Questions 4</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../practice/practice-questions-5.html">
 <span class="dropdown-text">Practice Questions 5</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../practice/practice-questions-6.html">
 <span class="dropdown-text">Practice Questions 6</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#common-file-formats-for-data-storage" id="toc-common-file-formats-for-data-storage" class="nav-link" data-scroll-target="#common-file-formats-for-data-storage">Common File Formats for Data Storage</a>
  <ul class="collapse">
  <li><a href="#parquet" id="toc-parquet" class="nav-link" data-scroll-target="#parquet">Parquet</a></li>
  <li><a href="#orc" id="toc-orc" class="nav-link" data-scroll-target="#orc">ORC</a></li>
  <li><a href="#avro" id="toc-avro" class="nav-link" data-scroll-target="#avro">AVRO</a></li>
  <li><a href="#parquet-vs-orc-vs-avro" id="toc-parquet-vs-orc-vs-avro" class="nav-link" data-scroll-target="#parquet-vs-orc-vs-avro">Parquet vs ORC vs AVRO</a></li>
  <li><a href="#recordio" id="toc-recordio" class="nav-link" data-scroll-target="#recordio">RecordIO</a></li>
  <li><a href="#json" id="toc-json" class="nav-link" data-scroll-target="#json">JSON</a></li>
  <li><a href="#json-lines" id="toc-json-lines" class="nav-link" data-scroll-target="#json-lines">JSON Lines</a></li>
  <li><a href="#csv" id="toc-csv" class="nav-link" data-scroll-target="#csv">CSV</a></li>
  <li><a href="#bzip" id="toc-bzip" class="nav-link" data-scroll-target="#bzip">BZip</a></li>
  <li><a href="#pickle" id="toc-pickle" class="nav-link" data-scroll-target="#pickle">Pickle</a></li>
  <li><a href="#apache-arrow" id="toc-apache-arrow" class="nav-link" data-scroll-target="#apache-arrow">Apache Arrow</a></li>
  <li><a href="#avro-recordio" id="toc-avro-recordio" class="nav-link" data-scroll-target="#avro-recordio">AVRO RecordIO</a></li>
  <li><a href="#thoughts" id="toc-thoughts" class="nav-link" data-scroll-target="#thoughts">Thoughts</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">File Formats for Data Storage</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Data</div>
    <div class="quarto-category">File Formats</div>
    <div class="quarto-category">Data Architecture</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Ravi Kalia </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>When working with data, choosing the right file format for storage is important for performance and cost considerations. Different file formats offer various trade-offs in terms of efficiency, compression, and compatibility with different tools and systems. In this guide, we’ll explore some common file formats used for data storage and processing.</p>
<p>To that end there’s many formats to consider, related to organizations’ capabilities and training on AWS. The cost and efficiency difference can be significant, enough to impact the bottom line.</p>
<p>AWS is a cloud provider that offers a wide range of services for data storage, processing, and analytics. When working with data on AWS, it’s essential to choose the right file format based on your use case, data size, and processing requirements. Here are some common file formats used for data storage on AWS:</p>
<hr>
</section>
<section id="common-file-formats-for-data-storage" class="level1">
<h1>Common File Formats for Data Storage</h1>
<section id="parquet" class="level2">
<h2 class="anchored" data-anchor-id="parquet">Parquet</h2>
<p>Parquet provides efficient columnar storage, high compression, and compatibility with various analytics tools. It’s commonly used for storing structured data in data lakes and data warehouses.</p>
<p><strong>Business Context:</strong> A financial services company uses Parquet to store structured transactional data in Amazon S3 and process it efficiently using AWS Glue and Amazon Athena for business intelligence and fraud detection.</p>
<p>This is a common use case for Parquet, as it provides columnar storage, efficient compression, and compatibility with various analytics tools.</p>
<p><strong>Example Usage in AWS Services:</strong></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> boto3</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>s3 <span class="op">=</span> boto3.client(<span class="st">'s3'</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>s3.upload_file(<span class="st">'data.parquet'</span>, <span class="st">'my-bucket'</span>, <span class="st">'data.parquet'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="orc" class="level2">
<h2 class="anchored" data-anchor-id="orc">ORC</h2>
<p>ORC (Optimized Row Columnar) is another columnar storage format that provides efficient compression and query performance for structured data. It’s commonly used with Apache Hive and Presto for processing large-scale datasets.</p>
<p><strong>Business Context:</strong> A healthcare analytics firm processes large-scale patient records using Apache Hive on Amazon EMR, benefiting from ORC’s high compression and query performance.</p>
<p>EMR and ORC a good match, as ORC is optimized for Hive and Presto queries, providing efficient storage and processing of structured data.</p>
<p><strong>Example Usage in AWS Services:</strong></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> boto3</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>s3 <span class="op">=</span> boto3.client(<span class="st">'s3'</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>s3.upload_file(<span class="st">'data.orc'</span>, <span class="st">'my-bucket'</span>, <span class="st">'data.orc'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="avro" class="level2">
<h2 class="anchored" data-anchor-id="avro">AVRO</h2>
<p>AVRO is a row-based data serialization format that provides schema evolution and efficient serialization for data exchange. It’s commonly used in streaming data processing and data pipelines. The benefits of Avro include schema evolution and efficient serialization, making it suitable for streaming data processing and data pipelines.</p>
<p><strong>Business Context:</strong></p>
<p>A streaming analytics company processes clickstream data using Apache Kafka and stores Avro files in Amazon S3 for downstream analysis with AWS Glue.</p>
<p><strong>Example Usage in AWS Services:</strong></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> fastavro</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fastavro.schema <span class="im">import</span> load_schema</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>schema <span class="op">=</span> load_schema(<span class="st">'schema.avsc'</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'data.avro'</span>, <span class="st">'wb'</span>) <span class="im">as</span> out:</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    fastavro.writer(out, schema, [{<span class="st">'field1'</span>: <span class="st">'value1'</span>}])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="parquet-vs-orc-vs-avro" class="level2">
<h2 class="anchored" data-anchor-id="parquet-vs-orc-vs-avro">Parquet vs ORC vs AVRO</h2>
<p>Parquet, ORC, and Avro are popular file formats for storing and processing data efficiently. They are commonly used in big data processing frameworks like Apache Hadoop, Apache Spark, and AWS services like Amazon EMR and AWS Glue. Here’s a comparison of these file formats. There pros and cons are in this table:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 17%">
<col style="width: 27%">
<col style="width: 27%">
<col style="width: 27%">
</colgroup>
<thead>
<tr class="header">
<th>Feature</th>
<th>Parquet</th>
<th>ORC</th>
<th>Avro</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Storage</td>
<td>Columnar</td>
<td>Columnar</td>
<td>Row-based</td>
</tr>
<tr class="even">
<td>Compression</td>
<td>High</td>
<td>High</td>
<td>Moderate</td>
</tr>
<tr class="odd">
<td>Schema Evolution</td>
<td>Limited</td>
<td>Limited</td>
<td>Full</td>
</tr>
<tr class="even">
<td>Query Performance</td>
<td>High</td>
<td>High</td>
<td>Moderate</td>
</tr>
<tr class="odd">
<td>Compatibility</td>
<td>Various tools and systems</td>
<td>Hive, Presto</td>
<td>Streaming frameworks</td>
</tr>
<tr class="even">
<td>Use Cases</td>
<td>Data lakes, data warehouses</td>
<td>Large-scale datasets</td>
<td>Streaming data processing</td>
</tr>
</tbody>
</table>
</section>
<section id="recordio" class="level2">
<h2 class="anchored" data-anchor-id="recordio">RecordIO</h2>
<p>RecordIO is a binary data format used for storing large datasets efficiently, especially for deep learning models. It’s commonly used in Amazon SageMaker for training datasets. It works effiiciently for deep learning models, especially in Amazon SageMaker. The data is stored in a binary format, which is efficient for large datasets.</p>
<p><strong>Business Context:</strong> A machine learning startup uses RecordIO to store large training datasets for deep learning models in Amazon SageMaker.</p>
<p><strong>Example Usage in AWS Services:</strong></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> boto3</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>s3 <span class="op">=</span> boto3.client(<span class="st">'s3'</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>s3.upload_file(<span class="st">'data.recordio'</span>, <span class="st">'my-bucket'</span>, <span class="st">'data.recordio'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="json" class="level2">
<h2 class="anchored" data-anchor-id="json">JSON</h2>
<p>JSON (JavaScript Object Notation) is a lightweight data interchange format that is easy to read and write. It’s commonly used for storing semi-structured data and exchanging information between systems. JSON is widely used for storing semi-structured data and exchanging information between systems. It is easy to read and write, making it a popular choice for many applications, particularly web services.</p>
<p><strong>Business Context:</strong> An e-commerce platform stores product catalog metadata in JSON format and processes it using AWS Lambda and DynamoDB.</p>
<p><strong>Example Usage in AWS Services:</strong></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> boto3</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {<span class="st">'product_id'</span>: <span class="dv">123</span>, <span class="st">'name'</span>: <span class="st">'Laptop'</span>}</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>json_data <span class="op">=</span> json.dumps(data)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>s3 <span class="op">=</span> boto3.client(<span class="st">'s3'</span>)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>s3.put_object(Bucket<span class="op">=</span><span class="st">'my-bucket'</span>, Key<span class="op">=</span><span class="st">'product.json'</span>, Body<span class="op">=</span>json_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="json-lines" class="level2">
<h2 class="anchored" data-anchor-id="json-lines">JSON Lines</h2>
<p>JSON Lines (JSONL) is a format for storing multiple JSON objects in a single file, with each object on a separate line. It’s commonly used for log files and streaming data processing. JSON Lines is a format for storing multiple JSON objects in a single file, with each object on a separate line. It is commonly used for log files and streaming data processing. That way each line is a separate JSON object, making it easy to read and process.</p>
<p><strong>Business Context:</strong> A social media analytics company stores user activity logs in JSON Lines format for real-time processing with Amazon Kinesis.</p>
<p><strong>Example Usage in AWS Services:</strong></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> boto3</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>s3 <span class="op">=</span> boto3.client(<span class="st">'s3'</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'logs.jsonl'</span>, <span class="st">'rb'</span>) <span class="im">as</span> f:</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    s3.upload_fileobj(f, <span class="st">'my-bucket'</span>, <span class="st">'logs.jsonl'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="csv" class="level2">
<h2 class="anchored" data-anchor-id="csv">CSV</h2>
<p>CSV is a simple tabular data format that is widely used for storing and exchanging structured data. It’s commonly used in data processing pipelines and analytics workflows. CSV is a simple tabular data format that is widely used for storing and exchanging structured data. It is commonly used in data processing pipelines and analytics workflows. It is easy to read and write, making it a popular choice for many applications, and a legacy format for many systems.</p>
<p><strong>Business Context:</strong> A retail chain stores daily sales transactions in CSV format and loads them into Amazon Redshift for reporting and analytics.</p>
<p><strong>Example Usage in AWS Services:</strong></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> boto3</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>s3 <span class="op">=</span> boto3.client(<span class="st">'s3'</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>s3.upload_file(<span class="st">'sales.csv'</span>, <span class="st">'my-bucket'</span>, <span class="st">'sales.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="bzip" class="level2">
<h2 class="anchored" data-anchor-id="bzip">BZip</h2>
<p>BZip is a compression format that provides high compression ratios for text data. It’s commonly used for compressing large text files before storage or transfer. BZip is a compression format that provides high compression ratios for text data. It is commonly used for compressing large text files before storage or transfer.</p>
<p><strong>Business Context:</strong> A genomics research institute compresses large DNA sequencing datasets using BZip and stores them in Amazon S3 for high-throughput computing.</p>
<p><strong>Example Usage in AWS Services:</strong></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> bz2</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> bz2.BZ2File(<span class="st">'data.bz2'</span>, <span class="st">'wb'</span>) <span class="im">as</span> f:</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    f.write(<span class="st">b'sample data'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="pickle" class="level2">
<h2 class="anchored" data-anchor-id="pickle">Pickle</h2>
<p>Pickle is a serialization format in Python that allows objects to be serialized and deserialized. It’s commonly used for saving and loading machine learning models and other Python objects. Pickle is a serialization format in Python that allows objects to be serialized and deserialized. It is commonly used for saving and loading machine learning models and other Python objects.</p>
<p><strong>Business Context:</strong> A data science consultancy saves model objects in pickle format for rapid loading into Amazon SageMaker endpoints.</p>
<p><strong>Example Usage in AWS Services:</strong></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pickle</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> boto3</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {<span class="st">'key'</span>: <span class="st">'value'</span>}</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'data.pkl'</span>, <span class="st">'wb'</span>) <span class="im">as</span> f:</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    pickle.dump(data, f)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>s3 <span class="op">=</span> boto3.client(<span class="st">'s3'</span>)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>s3.upload_file(<span class="st">'data.pkl'</span>, <span class="st">'my-bucket'</span>, <span class="st">'data.pkl'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="apache-arrow" class="level2">
<h2 class="anchored" data-anchor-id="apache-arrow">Apache Arrow</h2>
<p>Arrow format is a columnar in-memory data format that provides efficient data interchange between different systems. It’s commonly used for high-performance analytics and data processing. Arrow format is a columnar in-memory data format that provides efficient data interchange between different systems. It is commonly used for high-performance analytics and data processing.</p>
<p><strong>Business Context:</strong> A high-frequency trading firm shares structured data across multiple processing systems using Apache Arrow for in-memory analytics.</p>
<p><strong>Example Usage in AWS Services:</strong></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pyarrow <span class="im">as</span> pa</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pyarrow.parquet <span class="im">as</span> pq</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>array <span class="op">=</span> pa.array([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>table <span class="op">=</span> pa.Table.from_arrays([array], names<span class="op">=</span>[<span class="st">'column'</span>])</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>pq.write_table(table, <span class="st">'data.arrow'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="avro-recordio" class="level2">
<h2 class="anchored" data-anchor-id="avro-recordio">AVRO RecordIO</h2>
<p>AVRO Record IO is a binary data format used for storing training datasets efficiently, especially for deep learning model training. It’s commonly used in cloud-based AI platforms like Amazon SageMaker.</p>
<p><strong>Business Context:</strong> A cloud-based AI company stores training datasets in AVRO RecordIO format for efficient deep learning model training on Amazon SageMaker.</p>
<p><strong>Example Usage in AWS Services:</strong></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> boto3</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>s3 <span class="op">=</span> boto3.client(<span class="st">'s3'</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>s3.upload_file(<span class="st">'data.avro.recordio'</span>, <span class="st">'my-bucket'</span>, <span class="st">'data.avro.recordio'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="thoughts" class="level2">
<h2 class="anchored" data-anchor-id="thoughts">Thoughts</h2>
<p>So which should you use? It depends on the use case. For example, Parquet and ORC are great for data lakes and warehouses, while JSON and CSV are more common for data exchange. The choice of file format can impact performance, storage costs, and compatibility with different tools and systems. It’s important to consider these factors when choosing a file format for data storage and processing on AWS.</p>
<hr>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>